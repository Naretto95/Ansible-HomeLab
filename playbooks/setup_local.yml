---

- name: Generating basic setup
  hosts: localhost
  vars_files:
    - ../vars/setup.yml
  roles:
    - disable_motd

- name: Creating dockers
  hosts: localhost
  become: true
  vars_files:
    - ../vars/setup.yml
  roles:
    - packages
    - docker_containers
    - docker_images

- name: Config gitlab
  hosts: localhost
  vars_files:
    - ../vars/setup.yml
  roles:
    - role: gitlab_setup
      when: container_state is undefined or container_state == 'present'